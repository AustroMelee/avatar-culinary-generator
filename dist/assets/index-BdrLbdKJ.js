(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();const f=[{name:"Baking",dishSubtype:"Bake",description:"The monks are skilled bakers, creating everything from fruit pies to fluffy buns in their stone ovens, often using airbending to ensure even cooking."},{name:"Steaming",dishSubtype:"Steam",description:"A gentle cooking method using aromatic steam to preserve the natural, subtle flavors and textures of vegetables and tofu."},{name:"Light Saut√©",dishSubtype:"Stir-fry",description:"A quick stir in a hot wok with minimal oil, keeping vegetables crisp and vibrant while respecting their essence."},{name:"Simmering",dishSubtype:"Curry",description:"A slow, gentle cooking in liquid to meld flavors, perfect for creating rich curries and broths."},{name:"Piemaking",dishSubtype:"Pie",description:"A beloved pastime, creating savory or sweet pies with flaky, air-puffed crusts."},{name:"Minimalist Assembly",dishSubtype:"Salad",description:"A philosophy of using very little cooking, allowing the pure, inherent taste of the raw ingredients to be the focus of the meal."},{name:"Juicing",dishSubtype:"Juice",description:"A simple process of extracting the vibrant, raw essence of fruits and some vegetables into a refreshing drink."}],b={nation:"air-nomads",dishEmojis:{"main-course":["üç≤","üßÜ","ü•ò"],"side-dish":["üçö","ü•£"],snack:["ü•†","ü•ü"],dessert:["ü•ß","üçÆ","ü•Æ"],"soup-stew":["ü•£","üç≤"],salad:["ü•ó","ü•¨"],beverage:["üßã","üçµ","ü•§"]},nameParts:{prefixes:["Soaring","Whispering","Monk Gyatso's","Meditative","Peaceful","Sky Temple","Four Winds","Silent"],middles:["Wind","Cloud","Spirit","Lotus","Mountain","Sunrise","Treetop","Pilgrim's"],suffixes:["Surprise","Delight","Special","Medley","Festival"]}},v=[{name:"Apple",emoji:"üçé",rarity:"Common",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["pie","bake","salad","juice"],description:"A crisp, versatile fruit, often used in both pies and refreshing juices."},{name:"Banana",emoji:"üçå",rarity:"Common",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["pie","bake","juice"],description:"A soft, sweet fruit that provides quick energy for long meditation sessions."},{name:"Moon Peach",emoji:"üçë",rarity:"Rare",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["pie","salad","garnish"],description:"A rare, mystical fruit said to bloom only under the full moon."},{name:"Lychee Nuts",emoji:"ü•≠",rarity:"Uncommon",category:"fruit",flavorProfile:"sweet",isPlural:!0,suitability:["pie","salad","juice","garnish"],description:"Small, fragrant fruits with a delicate sweetness and floral aroma."},{name:"Mango",emoji:"ü•≠",rarity:"Uncommon",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["pie","curry","salad","juice"],description:"A tropical fruit with rich, sweet flesh perfect for both sweet and savory dishes."},{name:"Coconut",emoji:"ü••",rarity:"Uncommon",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["pie","bake","curry"],description:"A versatile fruit providing both meat and milk for various culinary uses."},{name:"Plums",emoji:"ü´ê",rarity:"Common",category:"fruit",flavorProfile:"sweet",isPlural:!0,suitability:["pie","bake","juice"],description:"Juicy, tart fruits that are often preserved or baked into pastries."},{name:"Cabbage",emoji:"ü•¨",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!1,suitability:["steam","stir-fry","curry","salad","dumpling"],description:"A leafy green that forms the base of many hearty Air Nomad dishes."},{name:"Carrot",emoji:"ü•ï",rarity:"Common",category:"vegetable",flavorProfile:"sweet",isPlural:!1,suitability:["steam","stir-fry","curry","salad","dumpling","bake","juice"],description:"A sweet root vegetable that adds color and crunch to meals."},{name:"Bean Sprouts",emoji:"üå±",rarity:"Common",category:"vegetable",flavorProfile:"neutral",isPlural:!0,suitability:["steam","stir-fry","salad"],description:"Tender, crisp sprouts that add a fresh, clean flavor."},{name:"Onion",emoji:"üßÖ",rarity:"Common",category:"vegetable",flavorProfile:"pungent",isPlural:!1,suitability:["stir-fry","curry","dumpling","bake","pie"],description:"A foundational vegetable that adds savory depth to countless recipes."},{name:"Potato",emoji:"ü•î",rarity:"Common",category:"vegetable",flavorProfile:"neutral",isPlural:!1,suitability:["steam","curry","bake","pie"],description:"A starchy, comforting staple grown in high-altitude temple gardens."},{name:"Tomato",emoji:"üçÖ",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!1,suitability:["curry","salad","bake"],description:"A juicy, bright vegetable used in sauces, salads, and baked dishes."},{name:"Pickles",emoji:"ü•í",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!0,suitability:["salad","garnish"],description:"Cucumbers preserved in a tangy brine, adding a sharp kick to meals."},{name:"Peppers",emoji:"üå∂Ô∏è",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!0,suitability:["steam","stir-fry","curry","salad"],description:"A colorful vegetable that adds a mild, sweet heat."},{name:"Oyster Mushrooms",emoji:"üçÑ",rarity:"Common",category:"fungi",flavorProfile:"umami",isPlural:!0,suitability:["steam","stir-fry","curry","pie"],description:"Delicate, fan-shaped mushrooms with a subtle, savory flavor."},{name:"Shiitake Mushrooms",emoji:"üçÑ",rarity:"Uncommon",category:"fungi",flavorProfile:"umami",isPlural:!0,suitability:["steam","stir-fry","curry","pie","dumpling"],description:"Rich, meaty mushrooms prized for their deep umami flavor and medicinal properties."},{name:"Light Vegetable Broth",emoji:"ü•£",rarity:"Common",category:"base",flavorProfile:"savory",isPlural:!1,suitability:["curry","steam"],description:"A clear, savory broth made from mountain vegetables, used as a base for soups and stews."},{name:"Rice",emoji:"üçö",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["steam","curry","stir-fry","salad","bake"],description:"The staple grain of Air Nomad cuisine, symbolizing simplicity and sustenance."},{name:"Barley",emoji:"üåæ",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["steam","curry","bake"],description:"A hearty grain that provides warmth and nourishment during cold mountain nights."},{name:"Flour",emoji:"üåæ",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["bake","pie","dumpling"],description:"Finely milled grain used for baking breads, pies, and dumplings."},{name:"Mountain Noodles",emoji:"üçú",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!0,suitability:["steam","stir-fry","curry"],description:"Simple, elegant noodles made from mountain spring water and flour."},{name:"Tofu",emoji:"‚¨ú",rarity:"Common",category:"protein",flavorProfile:"neutral",isPlural:!1,suitability:["steam","stir-fry","curry","bake","salad","dumpling"],description:"Versatile soybean curd that absorbs the flavors of any dish."},{name:"Mung Beans",emoji:"ü´ò",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!0,suitability:["curry","salad","steam"],description:"Small, nutritious legumes that sprout easily and provide essential protein."},{name:"Lentils of the Four Winds",emoji:"ü´ò",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!0,suitability:["curry","bake","pie"],description:"Sacred legumes said to be blessed by the four winds, providing strength and wisdom."},{name:"Temple Nuts",emoji:"üå∞",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!0,suitability:["salad","bake","garnish"],description:"Nuts harvested from the sacred trees surrounding Air Nomad temples."},{name:"Garlic",emoji:"üßÑ",rarity:"Common",category:"flavoring",flavorProfile:"pungent",isPlural:!1,suitability:["steam","stir-fry","curry","bake","pie","dumpling"],description:"A pungent bulb that adds depth and character to any dish."},{name:"Ginger",emoji:"ü´ö",rarity:"Common",category:"flavoring",flavorProfile:"pungent",isPlural:!1,suitability:["steam","stir-fry","curry","bake","pie","dumpling","juice"],description:"A warming root that adds spice and aids digestion, valued for its medicinal properties."},{name:"Vanilla",emoji:"üç¶",rarity:"Rare",category:"flavoring",flavorProfile:"sweet",isPlural:!1,suitability:["bake","pie","juice"],description:"A rare, aromatic spice that adds subtle sweetness and complexity to desserts."},{name:"Monk's Honey",emoji:"üçØ",rarity:"Uncommon",category:"flavoring",flavorProfile:"sweet",isPlural:!1,suitability:["bake","pie","juice","garnish"],description:"Pure honey collected by Air Nomad monks, said to contain the essence of mountain flowers."},{name:"Bird's Eye Chili",emoji:"üå∂Ô∏è",rarity:"Rare",category:"flavoring",flavorProfile:"pungent",isPlural:!1,suitability:["curry","stir-fry"],description:"A tiny, fiery chili that adds intense heat, used sparingly by the brave."}],k=[{name:"Stewing",dishSubtype:"Stew",description:"A slow simmering of ingredients in a single pot, creating a hearty, communal meal to share against the cold."},{name:"Poaching",dishSubtype:"Poach",description:"A gentle cooking method in seasoned sea-broth, preserving the delicate texture of fish and sea-prunes."},{name:"Grilling",dishSubtype:"Grill",description:"Cooking over an open flame, fueled by whale oil, giving a smoky char to meats and vegetables."},{name:"Curing",dishSubtype:"Cure",description:"A preservation technique using sea salt and tundra herbs to create savory, long-lasting dried meats and fish."},{name:"Freezing",dishSubtype:"Freeze",description:"Using waterbending to flash-freeze sweet creams and berries into delightful, icy desserts."},{name:"Boiling",dishSubtype:"Boil",description:"A simple and efficient method to cook roots, meats, and kelp in bubbling water."},{name:"Brewing",dishSubtype:"Brew",description:"Steeping rare herbs and flowers from the tundra or Spirit Oasis to create warming or spiritual teas."},{name:"Minimalist Assembly",dishSubtype:"Salad",description:"A simple preparation method for fresh seaweed and tundra greens, allowing their natural flavors to shine."}],S={nation:"water-tribe",dishEmojis:{"main-course":["üêü","üç¢","ü¶Ä"],"side-dish":["üçú","üåø","ü•£"],snack:["ü•©","üç§"],dessert:["üçß","üßä","ü•Æ"],"soup-stew":["üç≤","ü•£"],salad:["üåø","ü•ó"],beverage:["üßâ","üçµ"]},nameParts:{prefixes:["Arctic","Southern","Moon Spirit's","Tidal","Glacial","Hunter's","Icy","Deep Sea"],middles:["Wave","Ice","Seal","Tundra","Spirit","Pearl","Coral","Midnight"],suffixes:["Feast","Catch","Bounty","Stew","Delight","Broth","Jerky"]}},C=[{name:"Sea Prunes",emoji:"üêô",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!0,suitability:["stew","poach","boil"],description:"A staple of the Southern Water Tribe, these small, tender cephalopods are a primary source of protein."},{name:"Arctic Hen",emoji:"üêß",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["stew","grill"],description:"A flightless bird whose meat is rich and hearty, perfect for warming stews."},{name:"Tiger Seal",emoji:"ü¶≠",rarity:"Uncommon",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["stew","grill","cure"],description:"A prized catch, providing tough but flavorful meat that is often cured for long voyages."},{name:"Moon-gilled Salmon",emoji:"üêü",rarity:"Rare",category:"protein",flavorProfile:"umami",isPlural:!1,suitability:["poach","grill"],description:"A beautiful fish whose gills shimmer with moonlight, known for its delicate, buttery flavor."},{name:"Glacier Shrimp",emoji:"ü¶ê",rarity:"Common",category:"protein",flavorProfile:"sweet",isPlural:!0,suitability:["poach","stew","boil"],description:"Small, sweet shrimp found in the frigid waters beneath glaciers, sometimes dried into powder."},{name:"Giant Sea Crab",emoji:"ü¶Ä",rarity:"Rare",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["stew","boil"],description:"A delicacy of the Northern Water Tribe, considered by many to be the most sought-after food in the Northern Sea."},{name:"Platypus Bear",emoji:"üêª",rarity:"Legendary",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["stew","grill"],description:"An enormous and dangerous beast, served whole only at the grandest of Northern Water Tribe feasts."},{name:"Squid",emoji:"ü¶ë",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["stew","boil"],description:"A common catch used in many popular soups and stews across both tribes."},{name:"Kelp",emoji:"üåø",rarity:"Common",category:"vegetable",flavorProfile:"umami",isPlural:!1,suitability:["poach","stew","boil","salad"],description:"Versatile sea-vegetable used for noodles, wraps, and seasoning."},{name:"Sea Salt Root",emoji:"ü•î",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!1,suitability:["stew","grill","boil"],description:"A starchy root vegetable that grows in coastal soil, naturally infused with a mild saltiness."},{name:"Tundra Berries",emoji:"ü´ê",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!0,suitability:["stew","garnish","cure"],description:"Hardy, tart berries that add a burst of acidity to rich, savory stews."},{name:"Ice-crystal Lettuce",emoji:"ü•¨",rarity:"Uncommon",category:"vegetable",flavorProfile:"neutral",isPlural:!1,suitability:["salad"],description:"A crisp, pale lettuce that thrives in the cold, with a texture like biting into fresh snow."},{name:"Dandelion Greens",emoji:"üå±",rarity:"Uncommon",category:"vegetable",flavorProfile:"savory",isPlural:!0,suitability:["garnish","salad"],description:"Bitter greens used as a garnish to cut through the richness of blubber and fatty meats."},{name:"Taro Root",emoji:"üç†",rarity:"Rare",category:"vegetable",flavorProfile:"sweet",isPlural:!1,suitability:["stew","boil","freeze"],description:"A sweet, starchy root grown in the Spirit Oasis, used to make a paste for mooncakes."},{name:"Seaweed Noodles",emoji:"üçú",rarity:"Common",category:"base",flavorProfile:"umami",isPlural:!0,suitability:["stew","boil","poach"],description:"Slippery, savory noodles made from processed kelp, a staple in brothy dishes."},{name:"Pearl-grain Rice",emoji:"üçö",rarity:"Uncommon",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["stew","poach","boil"],description:"A short-grain, sticky rice traded from the Earth Kingdom, considered a luxury."},{name:"Thick Blubber Broth",emoji:"ü•£",rarity:"Common",category:"base",flavorProfile:"savory",isPlural:!1,suitability:["stew","poach"],description:"A rich, high-energy broth made from rendered seal blubber, essential for survival."},{name:"Imported Flour",emoji:"üåæ",rarity:"Uncommon",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["bake"],description:"A luxury from the Earth Kingdom, used to make special breads and cookies after the War."},{name:"Snow Plums",emoji:"üçë",rarity:"Common",category:"fruit",flavorProfile:"sweet",isPlural:!0,suitability:["freeze","brew"],description:"Sweet, pale plums that have a unique, icy crunch when eaten raw."},{name:"Polar Berries",emoji:"üçì",rarity:"Uncommon",category:"fruit",flavorProfile:"sweet",isPlural:!0,suitability:["freeze","brew"],description:"Extremely sweet berries used to make frozen desserts and sweet drinks."},{name:"Arctic Cloudberries",emoji:"ü´ê",rarity:"Rare",category:"fruit",flavorProfile:"sweet",isPlural:!0,suitability:["freeze","brew"],description:"Golden-orange berries that grow close to the ground, prized for their unique tart-sweet flavor."},{name:"Sweetened Seal Milk",emoji:"ü•õ",rarity:"Common",category:"dairy",flavorProfile:"sweet",isPlural:!1,suitability:["freeze","brew"],description:"Rich, creamy milk used as the base for most Water Tribe frozen desserts."},{name:"Glacier Salt",emoji:"üßÇ",rarity:"Common",category:"flavoring",flavorProfile:"savory",isPlural:!1,suitability:["poach","stew","grill","cure","boil"],description:"Coarse salt harvested from ancient glacial deposits."},{name:"Tundra Herbs",emoji:"üåø",rarity:"Common",category:"flavoring",flavorProfile:"pungent",isPlural:!0,suitability:["stew","grill","cure"],description:"A mix of hardy, aromatic herbs that grow on the sparse tundra."},{name:"Whale Oil",emoji:"üíß",rarity:"Common",category:"flavoring",flavorProfile:"umami",isPlural:!1,suitability:["grill","stew"],description:"A rich, savory oil used for cooking and fueling lamps, defining the smoky taste of grilled foods."},{name:"Butterfly Pea Flower",emoji:"üå∏",rarity:"Legendary",category:"flavoring",flavorProfile:"sweet",isPlural:!1,suitability:["brew"],description:"A rare flower from the Spirit Oasis, its extract is used in spiritual teas, turning them a beautiful blue."},{name:"Glacier Mint",emoji:"üçÉ",rarity:"Uncommon",category:"garnish",flavorProfile:"sweet",isPlural:!1,suitability:["freeze","garnish","brew"],description:"A potent mint that provides a cooling sensation, often used in drinks and desserts."}],l=i=>i[Math.floor(Math.random()*i.length)],A=(i,e)=>{const{cookingStyle:t,nationData:a}=e,{category:r,flavorProfile:o}=i,s=o==="sweet";if(a.nation==="air-nomads"){if(t.name==="Baking"||t.name==="Piemaking")return l(r==="protein"?["hearty","savory-baked","tender"]:s?["sweetly baked","warm","caramelized","delicate"]:["golden-baked","flaky","savory"]);if(t.name==="Light Saut√©")return l(["crisp-tender","lightly saut√©ed","vibrant"])}if(a.nation==="water-tribe"){if(t.name==="Stewing")return l(["hearty","rich","warming","slow-cooked"]);if(t.name==="Grilling")return l(["fire-charred","smoky","bold"]);if(t.name==="Poaching")return l(["delicate","gently poached","brothy"]);if(t.name==="Curing")return l(["sea-salted","wind-dried","savory"]);if(t.name==="Freezing")return l(["ice-crystalized","frost-kissed","chilled"])}return l(s?["sweet","delightful"]:["savory","hearty"])},x={"air-nomads":[{tag:"philosophy",text:i=>"The patterns made by the steam (or crust) are often used as a meditative focus, representing the transient and beautiful nature of life."},{tag:"tradition",text:i=>"An ancient recipe passed down through generations of monks, it is said that preparing this dish fosters a deep connection to the element of air."},{tag:"legend",text:i=>"Legend says that Avatar Yangchen herself favored a similar dish, enjoying it after long sessions of meditation to reground herself."},{tag:"practical",text:i=>"Often prepared for young Air Acolytes, this meal teaches the importance of patience and finding joy in simple, wholesome things."}],"water-tribe":[{tag:"philosophy",text:i=>"This dish represents the tribe's philosophy: use what the spirits provide, waste nothing, and share everything with the community."},{tag:"tradition",text:i=>"A communal meal, this dish is often cooked in a single large pot in the center of the hut, its warmth warding off the polar night."},{tag:"legend",text:i=>`It is said that the first hunters who caught ${i.primaryIngredient.name.toLowerCase()} learned to prepare it this way by observing moon spirits.`},{tag:"practical",text:i=>"The methods used to prepare this food are ancient, designed to provide maximum warmth and energy for hunters braving the icy wastes."}],"earth-kingdom":[],"fire-nation":[]},w=[{tag:"ingredient_centric",text:i=>`At its heart, this dish celebrates the ${A(i.primaryIngredient,i)} flavor of ${i.primaryIngredient.name.toLowerCase()}.`},{tag:"ingredient_centric",text:i=>`The experience begins with ${i.primaryIngredient.name.toLowerCase()}${i.secondaryIngredient?`, perfectly complemented by the essence of ${i.secondaryIngredient.name.toLowerCase()}.`:", a simple and pure flavor experience."}`},{tag:"style_centric",text:i=>`${i.cookingStyle.name} brings out a unique harmony between the ingredients, creating a texture that is both satisfying and light.`},{tag:"theme_centric",text:i=>`In keeping with its '${i.theme}' theme, the preparation is simple yet profound, allowing the natural flavors to shine.`}];class E{buildDescriptionSentence(e,t=[]){const a=w.filter(o=>!t.includes(o.tag)),r=l(a.length>0?a:w);return{sentence:r.text(e),usedTag:r.tag}}buildLoreSentence(e){const t=e.nationData.nation,a=x[t];return!a||a.length===0?"Every dish tells a story, and the tale of this one is waiting to be written.":l(a).text(e)}}const u=i=>i[Math.floor(Math.random()*i.length)];class D{grammar;constructor(){this.grammar=new E}generateName(e){const{nameParts:t}=e.nationData,a=u(t.prefixes),r=u(t.middles),o=u(t.suffixes),{dishSubtype:s}=e.cookingStyle,{primaryIngredient:d}=e,n=(h=>h.name.includes("Lentils")?"Lentil":h.name.includes("Mung Beans")?"Mung Bean":h.name.includes("Nuts")?"Nut":h.name.split(" ")[0])(d),m=Math.random();return["Curry","Pie","Juice","Salad","Stir-fry"].includes(s)?m<.6?`${a} ${n} ${s}`:`${r} ${n} ${s}`:m<.4?`${a} ${n} ${o}`:m<.7?`${r} ${n} Medley`:`${a} ${r} Special`}generateDescription(e){let t=[];const{sentence:a,usedTag:r}=this.grammar.buildDescriptionSentence(e,t);t.push(r);const{sentence:o}=this.grammar.buildDescriptionSentence(e,t);return`${a} ${o}`}generateLore(e){return this.grammar.buildLoreSentence(e)}}const j={"main-course":{protein:1,vegetable:2,base:1,flavoring:1},"side-dish":{vegetable:2,flavoring:1},snack:{protein:1,vegetable:1},dessert:{fruit:2,flavoring:1,garnish:1},"soup-stew":{protein:1,vegetable:2,base:1,flavoring:1},salad:{vegetable:2,garnish:1,protein:1},beverage:{fruit:1,flavoring:1}},B={"air-nomads":{"main-course":["Baking","Steaming","Light Saut√©","Simmering","Piemaking"],"side-dish":["Steaming","Light Saut√©","Simmering","Baking"],snack:["Minimalist Assembly","Baking","Light Saut√©"],dessert:["Baking","Piemaking","Minimalist Assembly"],"soup-stew":["Simmering"],salad:["Minimalist Assembly"],beverage:["Juicing"]},"water-tribe":{"main-course":["Stewing","Grilling","Poaching","Boiling"],"side-dish":["Boiling","Poaching"],snack:["Curing","Grilling"],dessert:["Freezing"],"soup-stew":["Stewing"],salad:["Minimalist Assembly"],beverage:["Brewing"]},"earth-kingdom":{"main-course":[],"side-dish":[],snack:[],dessert:[],"soup-stew":[],salad:[],beverage:[]},"fire-nation":{"main-course":[],"side-dish":[],snack:[],dessert:[],"soup-stew":[],salad:[],beverage:[]}};function L(i){const e=[...i];for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e}const y=i=>i[Math.floor(Math.random()*i.length)],T=(i,e)=>i.length===0?[]:L(i).slice(0,e);class M{textGenerator;ingredients;cookingStyles;nationData;constructor(e){switch(this.textGenerator=new D,e){case"air-nomads":this.nationData=b,this.ingredients=v,this.cookingStyles=f;break;case"water-tribe":this.nationData=S,this.ingredients=C,this.cookingStyles=k;break;default:console.warn(`Data for nation "${e}" not found, defaulting to Air Nomads.`),this.nationData=b,this.ingredients=v,this.cookingStyles=f}}generateDish(e){const t=this.createLinkedContext(e),a=this.textGenerator.generateName(t),r=this.textGenerator.generateDescription(t),o=this.textGenerator.generateLore(t),s=this.nationData.dishEmojis[e]||this.nationData.dishEmojis.snack,d=y(s);return{name:a,description:r,lore:o,nation:this.nationData.nation,dishType:e,emoji:d,ingredients:t.allIngredients,cookingStyle:t.cookingStyle}}createLinkedContext(e){const t=B[this.nationData.nation][e];if(!t||t.length===0)throw new Error(`No valid cooking styles defined for dish type '${e}' in nation '${this.nationData.nation}'`);const a=this.cookingStyles.filter(d=>t.includes(d.name)),r=y(a),o=this.selectIngredients(e,r);if(o.length===0)throw new Error(`Could not find any ingredients for ${e} with style ${r.name}.`);if(o.length<2&&e!=="snack"&&e!=="beverage")throw new Error(`Could not select enough suitable ingredients for dish type: ${e} with style ${r.name}.`);return{theme:y(["Humble & Meditative","Ceremonial & Celebratory","Invigorating & Playful","Ancient & Traditional"]),primaryIngredient:o[0],secondaryIngredient:o.length>1?o[1]:o[0],cookingStyle:r,allIngredients:o,nationData:this.nationData}}selectIngredients(e,t){const a=t.dishSubtype.toLowerCase(),r=j[e];if(!r)throw new Error(`No recipe blueprint found for dish type: ${e}`);const o=e==="dessert"||e==="beverage";let s=this.ingredients.filter(n=>n.suitability.includes(a));o?s=s.filter(n=>n.flavorProfile==="sweet"):s=s.filter(n=>n.flavorProfile!=="sweet");let d=[],c=new Set;for(const n in r){const m=n,h=r[m],F=s.filter(g=>g.category===m&&!c.has(g.name));T(F,h).forEach(g=>{d.push(g),c.add(g.name)})}return d}}const P={"air-nomads":{light:{"--theme-primary":"#D97706","--theme-secondary":"#FBBF24","--theme-accent":"#38BDF8","--theme-gradient-background":"linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%)","--theme-text-primary":"#422006","--theme-text-secondary":"#78350F","--theme-bg-card":"rgba(255, 251, 235, 0.9)","--theme-border-primary":"rgba(217, 119, 6, 0.2)","--dropdown-arrow-color":"#D97706","--theme-bg-primary":"linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%)","--theme-bg-secondary":"#FEF3C7","--theme-bg-overlay":"rgba(255, 251, 235, 0.95)","--theme-text-accent":"#38BDF8","--theme-border-secondary":"#FDE68A","--theme-shadow-light":"0 2px 8px rgba(217, 119, 6, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(217, 119, 6, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(217, 119, 6, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #FEF3C7 0%, #FDE68A 100%)","--theme-gradient-button":"linear-gradient(45deg, #D97706, #B45309)"},dark:{"--theme-primary":"#FBBF24","--theme-secondary":"#F87171","--theme-accent":"#67E8F9","--theme-gradient-background":"linear-gradient(135deg, #4A2B0F 0%, #2A1C0A 100%)","--theme-text-primary":"#FEF3C7","--theme-text-secondary":"#FDE68A","--theme-bg-card":"rgba(42, 28, 10, 0.9)","--theme-border-primary":"rgba(251, 191, 36, 0.3)","--dropdown-arrow-color":"#FBBF24","--theme-bg-primary":"linear-gradient(135deg, #4A2B0F 0%, #2A1C0A 100%)","--theme-bg-secondary":"#2A1C0A","--theme-bg-overlay":"rgba(42, 28, 10, 0.95)","--theme-text-accent":"#67E8F9","--theme-border-secondary":"#4A2B0F","--theme-shadow-light":"0 2px 8px rgba(251, 191, 36, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(251, 191, 36, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(251, 191, 36, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #2A1C0A 0%, #4A2B0F 100%)","--theme-gradient-button":"linear-gradient(45deg, #FBBF24, #F59E0B)"}},"water-tribe":{light:{"--theme-primary":"#0E7490","--theme-secondary":"#67E8F9","--theme-accent":"#F0F9FF","--theme-gradient-background":"linear-gradient(135deg, #E0F2FE 0%, #A5F3FC 100%)","--theme-text-primary":"#164E63","--theme-text-secondary":"#0891B2","--theme-bg-card":"rgba(240, 249, 255, 0.9)","--theme-border-primary":"rgba(14, 116, 144, 0.2)","--dropdown-arrow-color":"#0E7490","--theme-bg-primary":"linear-gradient(135deg, #E0F2FE 0%, #A5F3FC 100%)","--theme-bg-secondary":"#E0F2FE","--theme-bg-overlay":"rgba(240, 249, 255, 0.95)","--theme-text-accent":"#F0F9FF","--theme-border-secondary":"#A5F3FC","--theme-shadow-light":"0 2px 8px rgba(14, 116, 144, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(14, 116, 144, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(14, 116, 144, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #E0F2FE 0%, #A5F3FC 100%)","--theme-gradient-button":"linear-gradient(45deg, #0E7490, #0C4A6E)"},dark:{"--theme-primary":"#67E8F9","--theme-secondary":"#A5F3FC","--theme-accent":"#F0F9FF","--theme-gradient-background":"linear-gradient(135deg, #1F2937 0%, #082F49 100%)","--theme-text-primary":"#F0F9FF","--theme-text-secondary":"#A5F3FC","--theme-bg-card":"rgba(15, 23, 42, 0.9)","--theme-border-primary":"rgba(103, 232, 249, 0.3)","--dropdown-arrow-color":"#67E8F9","--theme-bg-primary":"linear-gradient(135deg, #1F2937 0%, #082F49 100%)","--theme-bg-secondary":"#082F49","--theme-bg-overlay":"rgba(15, 23, 42, 0.95)","--theme-text-accent":"#F0F9FF","--theme-border-secondary":"#1F2937","--theme-shadow-light":"0 2px 8px rgba(103, 232, 249, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(103, 232, 249, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(103, 232, 249, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #082F49 0%, #1F2937 100%)","--theme-gradient-button":"linear-gradient(45deg, #67E8F9, #06B6D4)"}},"earth-kingdom":{light:{"--theme-primary":"#16A34A","--theme-secondary":"#FACC15","--theme-accent":"#A16207","--theme-gradient-background":"linear-gradient(135deg, #F0FDF4 0%, #D1FAE5 100%)","--theme-text-primary":"#14532D","--theme-text-secondary":"#15803D","--theme-bg-card":"rgba(240, 253, 244, 0.9)","--theme-border-primary":"rgba(22, 163, 74, 0.2)","--dropdown-arrow-color":"#16A34A","--theme-bg-primary":"linear-gradient(135deg, #F0FDF4 0%, #D1FAE5 100%)","--theme-bg-secondary":"#F0FDF4","--theme-bg-overlay":"rgba(240, 253, 244, 0.95)","--theme-text-accent":"#A16207","--theme-border-secondary":"#D1FAE5","--theme-shadow-light":"0 2px 8px rgba(22, 163, 74, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(22, 163, 74, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(22, 163, 74, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #F0FDF4 0%, #D1FAE5 100%)","--theme-gradient-button":"linear-gradient(45deg, #16A34A, #15803D)"},dark:{"--theme-primary":"#4ADE80","--theme-secondary":"#FDE047","--theme-accent":"#FEF08A","--theme-gradient-background":"linear-gradient(135deg, #1C1917 0%, #172513 100%)","--theme-text-primary":"#D1FAE5","--theme-text-secondary":"#A7F3D0","--theme-bg-card":"rgba(23, 37, 19, 0.9)","--theme-border-primary":"rgba(74, 222, 128, 0.3)","--dropdown-arrow-color":"#4ADE80","--theme-bg-primary":"linear-gradient(135deg, #1C1917 0%, #172513 100%)","--theme-bg-secondary":"#172513","--theme-bg-overlay":"rgba(23, 37, 19, 0.95)","--theme-text-accent":"#FEF08A","--theme-border-secondary":"#1C1917","--theme-shadow-light":"0 2px 8px rgba(74, 222, 128, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(74, 222, 128, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(74, 222, 128, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #172513 0%, #1C1917 100%)","--theme-gradient-button":"linear-gradient(45deg, #4ADE80, #22C55E)"}},"fire-nation":{light:{"--theme-primary":"#DC2626","--theme-secondary":"#F97316","--theme-accent":"#44403C","--theme-gradient-background":"linear-gradient(135deg, #FEF2F2 0%, #FDBA74 100%)","--theme-text-primary":"#450A0A","--theme-text-secondary":"#991B1B","--theme-bg-card":"rgba(254, 242, 242, 0.9)","--theme-border-primary":"rgba(220, 38, 38, 0.2)","--dropdown-arrow-color":"#DC2626","--theme-bg-primary":"linear-gradient(135deg, #FEF2F2 0%, #FDBA74 100%)","--theme-bg-secondary":"#FEF2F2","--theme-bg-overlay":"rgba(254, 242, 242, 0.95)","--theme-text-accent":"#44403C","--theme-border-secondary":"#FDBA74","--theme-shadow-light":"0 2px 8px rgba(220, 38, 38, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(220, 38, 38, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(220, 38, 38, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #FEF2F2 0%, #FDBA74 100%)","--theme-gradient-button":"linear-gradient(45deg, #DC2626, #B91C1C)"},dark:{"--theme-primary":"#F87171","--theme-secondary":"#FB923C","--theme-accent":"#FCD34D","--theme-gradient-background":"linear-gradient(135deg, #171717 0%, #440a0a 100%)","--theme-text-primary":"#FEE2E2","--theme-text-secondary":"#FECACA","--theme-bg-card":"rgba(30, 7, 7, 0.9)","--theme-border-primary":"rgba(248, 113, 113, 0.3)","--dropdown-arrow-color":"#F87171","--theme-bg-primary":"linear-gradient(135deg, #171717 0%, #440a0a 100%)","--theme-bg-secondary":"#440a0a","--theme-bg-overlay":"rgba(30, 7, 7, 0.95)","--theme-text-accent":"#FCD34D","--theme-border-secondary":"#171717","--theme-shadow-light":"0 2px 8px rgba(248, 113, 113, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(248, 113, 113, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(248, 113, 113, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #440a0a 0%, #171717 100%)","--theme-gradient-button":"linear-gradient(45deg, #F87171, #EF4444)"}}};class p{static currentNation="air-nomads";static currentMode="light";static initialize(){const e=window.matchMedia("(prefers-color-scheme: dark)").matches;this.currentMode=e?"dark":"light",this.applyCurrentTheme()}static setNation(e){this.currentNation=e,this.applyCurrentTheme()}static toggleLightDark(){this.currentMode=this.currentMode==="light"?"dark":"light",this.applyCurrentTheme()}static applyCurrentTheme(){const e=document.documentElement,t=document.body,r=(P[this.currentNation]||P["air-nomads"])[this.currentMode];for(const[o,s]of Object.entries(r))e.style.setProperty(o,s);t.className="",t.classList.add(`theme-${this.currentNation}`),t.dataset.theme=this.currentMode}}class N{static generateButton;static dishContainer;static nationSelector;static dishTypeSelector;static decorativeSymbols;static themeToggleButton;static selectedNation="air-nomads";static selectedDishType="main-course";static initialize(){if(this.generateButton=document.getElementById("generate-button"),this.dishContainer=document.getElementById("dish-container"),this.nationSelector=document.getElementById("nation-selector"),this.dishTypeSelector=document.getElementById("dish-type-selector"),this.decorativeSymbols=document.querySelectorAll(".decorative-symbol"),this.themeToggleButton=document.getElementById("theme-toggle"),!this.generateButton||!this.dishContainer||!this.nationSelector||!this.dishTypeSelector||!this.themeToggleButton){console.error("A critical UI element could not be found. Aborting initialization.");return}this.attachEventListeners(),this.setupCustomSelect(this.nationSelector,this.handleNationChange.bind(this)),this.setupCustomSelect(this.dishTypeSelector,this.handleDishTypeChange.bind(this)),this.updateThemeUI(),this.dishContainer.innerHTML=`<div class="dish-display empty">Select your options and click 'Generate' to create a dish!</div>`}static attachEventListeners(){this.generateButton.addEventListener("click",this.handleGenerateClick.bind(this)),this.themeToggleButton.addEventListener("click",()=>{p.toggleLightDark(),this.updateThemeUI()})}static updateThemeUI(){const e=document.body.dataset.theme==="dark";this.themeToggleButton.textContent=e?"‚òÄÔ∏è":"üåô"}static handleGenerateClick(){this.dishContainer.innerHTML='<div class="dish-display generating">The spirits are cooking... Please wait.</div>',this.generateButton.disabled=!0,setTimeout(()=>{try{const t=new M(this.selectedNation).generateDish(this.selectedDishType);this.renderDish(t)}catch(e){console.error("Failed to generate dish:",e),this.renderError(e)}finally{this.generateButton.disabled=!1}},500)}static handleNationChange(e){this.selectedNation=e,p.setNation(this.selectedNation),this.updateDecorativeSymbols(),console.log(`Nation changed to: ${this.selectedNation}`)}static handleDishTypeChange(e){this.selectedDishType=e,console.log(`Dish type changed to: ${this.selectedDishType}`)}static updateDecorativeSymbols(){const t=`/assets/${{"air-nomads":"air_nation-B2k_nS_3.png","water-tribe":"water_nation-B7rWlJEQ.png","earth-kingdom":"earth_nation-C3FaE_j9.png","fire-nation":"fire_nation-BClEM4ky.png"}[this.selectedNation]}`,a=this.selectedNation.replace("-"," ").replace(/\b\w/g,r=>r.toUpperCase());this.decorativeSymbols.forEach(r=>{r.src=t,r.alt=a})}static renderDish(e){const t=e.ingredients.map(r=>this.renderIngredient(r)).join(""),a=`
      <div class="dish-display">
        <h2><span class="dish-emoji">${e.emoji}</span> ${e.name}</h2>
        <div class="dish-sections">
          <div class="description-section">
            <h3>Description</h3>
            <p class="description">${e.description}</p>
          </div>
          <div class="lore-section">
            <h3>Lore</h3>
            <p class="lore">${e.lore}</p>
          </div>
        </div>
        <div class="dish-details">
          <div class="ingredients">
            <h3>Ingredients</h3>
            <ul>
              ${t}
            </ul>
          </div>
          <div class="technique">
            <h3>Cooking Style: ${e.cookingStyle.name}</h3>
            <p>${e.cookingStyle.description}</p>
          </div>
        </div>
      </div>
    `;this.dishContainer.innerHTML=a}static renderIngredient(e){return`
          <li class="ingredient-item ${`rarity-${e.rarity.toLowerCase()}`}">
              <span class="ingredient-emoji">${e.emoji}</span>
              <span class="ingredient-name">${e.name}</span>
              <span class="ingredient-rarity">${e.rarity.toUpperCase()}</span>
          </li>
      `}static renderError(e){const t=`
        <div class="error-message">
            <h3>A Storm in the Kitchen!</h3>
            <p>It seems the generator encountered an issue. The spirits might be a bit unbalanced today.</p>
            <small>Error: ${e.message}</small>
            <button class="retry-button" onclick="document.getElementById('generate-button').click()">Try Again</button>
        </div>
    `;this.dishContainer.innerHTML=t}static setupCustomSelect(e,t){const a=e.querySelector(".selected-option"),r=e.querySelector(".dropdown-options"),o=Array.from(r.querySelectorAll(".option"));!a||!r||(a.addEventListener("click",s=>{s.stopPropagation();const d=e.classList.contains("active");document.querySelectorAll(".custom-nation-selector, .custom-dish-type-selector").forEach(c=>{c.classList.remove("active"),c.querySelector(".selected-option")?.classList.remove("open"),c.querySelector(".dropdown-options")?.classList.remove("show")}),d||(e.classList.add("active"),a.classList.add("open"),r.classList.add("show"))}),o.forEach(s=>{s.addEventListener("click",d=>{d.stopPropagation();const c=s.dataset.value;if(c===e.dataset.value){e.classList.remove("active"),a.classList.remove("open"),r.classList.remove("show");return}e.dataset.value=c;const n=a.querySelector(".selected-option-content");n.innerHTML=s.innerHTML,e.classList.remove("active"),a.classList.remove("open"),r.classList.remove("show"),t(c)})}),document.addEventListener("click",()=>{document.querySelectorAll(".custom-nation-selector, .custom-dish-type-selector").forEach(s=>{s.classList.remove("active"),s.querySelector(".selected-option")?.classList.remove("open"),s.querySelector(".dropdown-options")?.classList.remove("show")})}))}}document.addEventListener("DOMContentLoaded",()=>{p.initialize(),N.initialize(),console.log("Avatar Culinary Dish Generator Initialized!")});
